################################## GENERAL ###################################
# Cambia el nivel de verbosidad de registro a "notice" para producción.
loglevel notice 

# Ruta de trabajo para archivos de persistencia
dir /data 

################################# NETWORKING #################################
# Escucha en todas las interfaces para permitir conexiones de otros contenedores.
# En Docker Compose, esto permite que backend_api_compras se conecte al servicio redis.
bind 0.0.0.0

# Deshabilitar modo protegido para permitir conexiones remotas con autenticación
protected-mode no

# Nota: La contraseña se maneja con el argumento `command` en docker-compose.yml,
# no directamente aquí, por seguridad.############################## MEMORY MANAGEMENT #############################
# La configuración de memoria es la más importante para caché.
# ¡Ajusta este valor de 512mb al tamaño de RAM real disponible!
maxmemory 512mb

# Política de evicción: Elimina las claves menos usadas recientemente (LRU)
# cuando se alcanza el límite de memoria. Esto optimiza la caché.
maxmemory-policy allkeys-lru 

############################## PERSISTENCE ###################################

# Habilitar el modo AOF para un registro de comandos más robusto
appendonly yes

# Sincroniza AOF cada segundo. Buen equilibrio entre rendimiento y durabilidad.
appendfsync everysec

################################## SECURITY ###################################
# La contraseña se configura via variable de entorno en docker-compose.yml
# No definir requirepass aquí para evitar conflictos

